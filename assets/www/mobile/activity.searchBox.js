"use strict";templates=templates||{};templates.mobile=templates.mobile||{};templates.mobile.activity=templates.mobile.activity||{};templates.mobile.activity.searchBox=templates.mobile.activity.searchBox||{};(function(){var h=devhd.i18n.L,a=devhd.i18n.$L,e=[],f="",i=templates.mobile.activity.searchBox;function g(l){var k=arguments,j;for(j=1;j<k.length;
j++){l.push(k[j])}}function d(j){try{if(j==null){return""}if(typeof j!="string"){return j}if(typeof j.replace!="function"){return j}return j.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}catch(k){return""}}function c(j){if(j==null){return""}if(typeof j!="string"){return j}if(typeof j.replace!="function"){return j}return j.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\\/g,"\\\\").replace(/\"/g,"&quot;").replace(/[\f\r\t\n]/g," ").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")
}function b(j){if(aString==null){return null}return aString.replace(/<\/?[^>]+>/gi,"")}i.css=function(k){var j=[];g(j,e[0],PANEL_W,e[1],feedlyTheme.se_searchbox_surrounding,e[2],feedlyTheme.se_color,e[3],LIST_BAR,e[4],family("regular"),e[5],PANEL_W-20,e[6],feedlyTheme.se_searchbox_back,e[7],svg(themable("mobile-icon-clear")),e[8],svg(themable("mobile-icon-searchbox")),e[9],feedlyTheme.se_searchbox_color,e[10],PANEL_W-20-20-10,e[11],feedlyTheme.se_searchbox_color,e[12],feedlyTheme.se_searchbox_back,e[13]);
if(ANDROID_TWO()==true){g(j,e[14])}else{g(j,e[15])}g(j,e[16],PANEL_W-20-2*7-20-5,e[17],feedlyTheme.se_searchbox_color,e[18],feedlyTheme.se_searchbox_placeholder,e[19]);return j.join(f)};i.layout=function(j,l){var k=[];g(k,e[20]);return k.join(f)};e=["\nbody\n{\nmargin : 0px;\npadding : 0px;\nwidth : ",";\noverflow : hidden;\nbackground : ",";\ncolor : ",";\n-webkit-touch-callout : none;\n-webkit-user-select : none;\n-webkit-tap-highlight-color : rgba( 255, 255, 255, 0 );\nline-height : ","px;\nfont-size : 16px;\n","\n}\n#frame\n{\nmargin : 10px;\nheight : 34px;\nwidth : ",";\noverflow : hidden;\nbackground-color : ",";\nborder-radius : 3px;\n}\n#clear\n{\nposition : absolute;\nright : 0px;\ntop : 0px;\nbackground : url( "," ) no-repeat;\n-webkit-background-size : 54px 54px;\nbackground-size : 54px 54px;\nwidth : 54px;\nheight : 54px;\nz-index : 100004;\n}\n#searchBox\n{\nheight : 34px;\nfont-size : 16px;\noverflow : hidden;\nbackground : url( "," ) 6px 7px no-repeat;\ncolor : ",";\n-webkit-background-size : 20px 20px;\nbackground-size : 20px 20px;\nline-height : 20px;\npadding-left : 24px;\nfont-family : sans-serif;\n}\n#searchBox.nonEmpty\n{\nbackground : none;\npadding-left : 0px;\n}\n#input\n{\nwidth : ","px;\npadding-left : 10px;\npadding-right : 0px;\nfont-size : 16px;\noverflow : hidden;\ncolor : ",";\nfont-family : sans-serif;\nborder-radius : 0px;\nborder : 0px;\nbackground-color : ",";\n-webkit-appearance : none; \n-webkit-user-modify : read-write-plaintext-only;\n-webkit-user-select : text;\n"," line-height : 34px;\nheight : 34px;\npadding-top : 0px;\npadding-bottom : 0px;\n"," padding-top : 17px;\npadding-bottom : 17px;\nline-height : 18px;\nheight : 18px;\n"," }\n#searchBox.nonEmpty #input\n{\nwidth : ","px; \n}\n#input:focus\n{\noutline : none;\ncolor : ",";\n}\n#input::-webkit-input-placeholder \n{\ncolor : ",";\n}\n#input:focus::-webkit-input-placeholder \n{\ncolor : rgba( 255, 255, 255, 0.6 );\n}\n",'\n<div id="clear" style="display:none"></div>\n<div id="frame">\n<form onsubmit="searchAndHideKeyboard(); return false;" method="post" style="margin-bottom:0px">\n<div id="searchBox">\n<input id="input" autocorrect="off" autocapitalize="off" type="search" placeholder="Search a topic or a blog" />\n</div>\n</form>\n</div>\n']
})();"use strict";devhd.extend=function(d,c,b){for(var a in c){if(b==0||b==undefined||d[a]==undefined){d[a]=c[a]}else{if(b!=1){throw new Error("property '"+a+"' already set when extending object")}}}return d};function CW(d,c,a){a=a||OUTER;var b=Math.floor((W-(2*OUTER+(c-1)*a))/c);return d*b+(d-1)*a}function CH(d,c,f,a){a=a||OUTER;var e=SH()-(f||0);var b=Math.floor((e-(2*OUTER+(c-1)*a))/c);
return d*b+(d-1)*a}function SH(){return H-NAVIGATION_BAR-LOCATOR}var T=null;var SETTINGS={};function THEME(){return SETTING("feedly_theme")||"white"}function themable(a){switch(THEME()){case"black":return a+"-black";case"white":default:return a+"-white"}}function TABLET(){return MODE=="tablet"}function IOS(){return SETTING("device_os").indexOf(" ios")>-1||SETTING("device_os").indexOf("iphone")>-1||SETTING("device_os").indexOf("ipad")>-1
}function SVG(){return IOS_7PLUS()||ANDROID_SVG()}function IOS_7PLUS(){return IOS()&&parseFloat(SETTING("device_os_version"))>=7}function IOS_8PLUS(){return IOS()&&parseFloat(SETTING("device_os_version"))>=8}function ANDROID_SVG(){return ANDROID()&&parseFloat(SETTING("device_os_level"))>=19}function ANDROID(){return SETTING("device_os")=="android"}function ANDROID_MED(){return SETTING("device_os")=="android"&&parseFloat(SETTING("device_os_level"))<18
}function ANDROID_LOW(){return SETTING("device_os")=="android"&&parseFloat(SETTING("device_os_level"))<16}function ANDROID_TWO(){return SETTING("device_os")=="android"&&parseFloat(SETTING("device_os_level"))<14}function KINDLE(){return(navigator.userAgent.indexOf("KFTT")>-1||navigator.userAgent.indexOf("Kindle Fire")>-1)}function KINDLE_LOW(){return KINDLE()&&parseFloat(SETTING("device_os_version"))<4.1
}function KINDLE_OLD(){return navigator.userAgent.indexOf("Kindle Fire")>-1}function SOCIAL_GOOGLE_PLUS(){return SETTING("social_google_plus")=="yes"}function FONT(){return"system"}function DP(a){if(a==null){return null}else{return Math.ceil(a/window.devicePixelRatio)}}function faces(a){return fFaces[a]}function family(a){if(feedlyFont[FONT()][a]!=null){return"font-family:"+feedlyFont[FONT()][a]+";"
}else{return"font-family:"+feedlyFont.common[a]+";"}}function SETTING(a){return SETTINGS[a]}function TRACK(b,d,a,c){$B.core.wm.postMessage("parent",{type:"analytics",category:b,action:d,label:a,value:c})}function UPDATE_SETTING(a,b){SETTINGS[a]=b;$B.core.application.setUserSetting(a,b)}function TREAD(a){try{return window.localStorage.getItem(a)}catch(b){$feedly("[TREAD] failed because "+b.name+" -- "+b.message);
return null}}function TWRITE(a,b){try{window.localStorage.setItem(a,b)}catch(c){$feedly("[TWRITE] failed because "+c.name+" -- "+c.message)}}function LREAD(a){try{return SETTING("feedly_local_"+a)}catch(b){$feedly("[LREAD] failed because "+b.name+" -- "+b.message);return null}}function LWRITE(a,b){try{LWRITES({key:b})}catch(c){$feedly("[LWRITE] failed because "+c.name+" -- "+c.message)
}}function LWRITES(f){try{var d={};for(var a in f){var b="feedly_local_"+a;d[b]=SETTINGS[b]=f[a]}$B.core.application.updateUserSettings(d,true)}catch(c){$feedly("[LWRITES] failed because "+c.name+" -- "+c.message)}}function LREMOVE(a){try{LWRITES({key:null})}catch(b){$feedly("[LREMOVE] failed because "+b.name+" -- "+b.message)}}function LREMOVES(b){try{var d={};
for(var a=0;a<b.length;a++){d[b[a]]=null}LWRITES(d)}catch(c){$feedly("[LREMOVES] failed because "+c.name+" -- "+c.message)}}function FAVICON(a){try{if(a==null){return"https://www.google.com/s2/favicons?domain=google.com"}if(a.indexOf("twitter.com")>-1){return"http://twitter.com/favicon.ico"}return"https://www.google.com/s2/favicons?domain="+a.split("/").slice(2,3)+"&alt=feed"
}catch(b){return"https://www.google.com/s2/favicons?domain=google.com"}}function GET(c,e,f,d,i,a){if(d==null){d={}}if(i==null){i=30000}if(a==null){a=0}var j=null;var g=new Date().getTime();var h=new XMLHttpRequest();h.onreadystatechange=function(){if(h.readyState==4){if(j==null){return}if(j!=null){window.clearTimeout(j);j=null}if(h.status==200||h.status==201){e(h.responseText)
}else{if(h.status==0){if(a<2){window.setTimeout(function(){GET(c,e,f,d,i,a+1)},1000)}else{f("Failed to connect to the network")}}else{f(h.status)}}}};j=window.setTimeout(function(){if(j==null){return}window.clearTimeout(j);j=null;f("Failed to connect to the network")},i);h.open("GET",c,true);for(var b in d){h.setRequestHeader(b,d[b])}h.send("")}function POST(b,f,d,e,c,g){if(c==null){c={}
}if(g==null){g=30000}var i=null;var h=new XMLHttpRequest();h.onreadystatechange=function(){if(h.readyState==4){if(i==null){return}if(i!=null){window.clearTimeout(i);i=null}if(h.status==200||h.status==201){d(h.responseText)}else{e(h.status)}}};i=window.setTimeout(function(){if(i==null){return}window.clearTimeout(i);i=null;e("Failed to connect to the network")
},g);h.open("POST",b,true);for(var a in c){h.setRequestHeader(a,c[a])}h.send(f)}function JGET(a,d,b,e,c){GET(a,function(f){d(JSON.parse(f))},b,e,c)}function HINT(a){if(a==null){return}SIGN("[?] "+a)}function SIGN(b,a){if(b==null){return}$B.core.wm.sign(b,a,{})}function image(b){var a=["images/",b];if(window.devicePixelRatio>1){a.push("@2x")}a.push(".png");
return a.join("")}function svg(b){if(IOS_7PLUS()){var a=["images/",b];a.push("~ios");a.push(".svg");return a.join("")}else{if(ANDROID_SVG()){var a=["images/",b];a.push("~android");a.push(".svg");return a.join("")}else{return image(b)}}}function usvg(b){if(SVG()){var a=["images/",b];a.push(".svg");return a.join("")}else{return image(b)}}function findByClass(b,a){if(b==null){return null
}if(b.className!=null&&b.className.indexOf(a)>-1){return b}return null}function element(a){return document.getElementById(a)}function injectCSS(a){var b=document.createElement("style");b.setAttribute("data-injected","yes");b.setAttribute("type","text/css");b.innerText=a;document.getElementsByTagName("head")[0].appendChild(b)}function removeInjectedCSS(){try{var d=document.getElementsByTagName("style");
var b=0;for(var a=0;a<d.length;a++){if(d[a].getAttribute("data-injected")=="yes"){d[a].parentNode.removeChild(d[a]);b++}}return true}catch(c){$feedly("failed to remove injected CSS because "+c.name+" -- "+c.message);return false}}function refreshCSS(){removeInjectedCSS();switch(THEME()){case"black":feedlyTheme=THEME_BLACK;break;case"white":default:feedlyTheme=THEME_WHITE
}T=templates.mobile.activity[ACTIVITY_NAME];if(T!=null&&T.css!=null){injectCSS(T.css())}}function setupActivity(a){try{T=templates.mobile.activity[ACTIVITY_NAME];if(T!=null&&T.css!=null){injectCSS(T.css())}if(T!=null&&T.layout!=null){document.body.className=(document.body.className||"")+" "+SETTING("device_os")+" "+(KINDLE()?"kindle":"");document.body.innerHTML=T.layout(a)
}}catch(b){$feedly("[activity] failed to setup:"+JSON.stringify(a));throw b}}function makeActionable(a){var b=document.body;b.ontouchstart=fastTouchStart;b.ontouchmove=fastTouchMove;b.ontouchend=fastTouchEnd;b.ontouchcancel=fastTouchCancel}var startX;var startY;var maxDeltaX;var maxDeltaY;var touchable=null;var highlightTimer=null;var longTouchTimer=null;
var oldBackground=null;var t0=null;function unhighlightTouchable(){if(touchable==null){return}if(touchable.getAttribute("data-highlight-longer")=="yes"){window.setTimeout(function(){touchable.style.backgroundColor=oldBackground;touchable=null;oldBackground=null},500)}else{touchable.style.backgroundColor=oldBackground;touchable=null;oldBackground=null
}}function fastTouchStart(a){a.preventDefault();a.stopPropagation();t0=new Date().getTime();maxDeltaX=0;maxDeltaY=0;if(longTouchTimer!=null){window.clearTimeout(longTouchTimer);longTouchTimer=null}if(touchable!=null){touchable.style.backgroundColor=oldBackground;touchable=null}startX=a.targetTouches[0].clientX;startY=a.targetTouches[0].clientY;touchable=findByClass(a.targetTouches[0].target,"touchable");
if(touchable!=null){oldBackground=touchable.style.backgroundColor;touchable.style.backgroundColor=touchable.getAttribute("data-touch-highlight")||feedlyTheme.highlight;if(ANDROID()){longTouchTimer=window.setTimeout(function(){if(touchable==null){return}var b=touchable.getAttribute("data-action-hint");if(b!=null){HINT(b)}touchable.style.backgroundColor=oldBackground;
touchable=null},1000)}}}function fastTouchMove(a){a.preventDefault();a.stopPropagation()}function fastTouchEnd(a){a.preventDefault();a.stopPropagation();if(longTouchTimer!=null){window.clearTimeout(longTouchTimer);longTouchTimer=null}if(touchable==null){return}try{onAction(touchable.getAttribute("data-action"),touchable)}catch(b){$feedly("[activity] onAction failed")
}unhighlightTouchable()}function fastTouchCancel(a){if(touchable!=null){touchable.style.backgroundColor=oldBackground;touchable=null;oldBackground=null}}var clearElem=null;var inputElem=null;var hintElem=null;var searchBoxElem=null;function MAIN(a){try{setupActivity(a);inputElem=element("input");inputElem.onkeyup=handleInputChanged;inputElem.onfocus=handleInputFocus;
inputElem.onblur=handleInputBlur;inputElem.onpaste=handleInputPaste;clearElem=element("clear");clearElem.addEventListener("touchstart",handleClearInput,true);clearElem.addEventListener("touchend",stopPropagation,true);clearElem.addEventListener("click",stopPropagation,true);searchBoxElem=element("searchBox");hintElem=element("hint")}catch(b){$feedly("[searchBox] failed MAIN because: "+b.name+" -- "+b.message)
}}var visibility="hidden";function ONAPPEVENT(b){switch(b.type){case"visibility":visibility=b.visible;if(b.visible=="hidden"){if(inputElem!=null){inputElem.blur()}}break;case"userSettings":if(SETTINGS==null){SETTINGS=b;feedlyApplicationVersion=SETTING("feedly_app_version")}else{var a=SETTING("feedly_theme")||initialTheme;SETTINGS=b;var c=SETTING("feedly_theme")||"white";
if(c!=a){refreshCSS()}}break;default:break}}function ONEVENT(a){try{switch(a.type){case"reset":updateInput("");break;case"search":updateInput(a.keyword,true);break;case"blurInput":blurInput();break;case"setInput":inputElem.value=a.keyword;clearElem.style.display="block";blurInput();break;default:}}catch(b){$feedly("[store] ON EVENT FAILED: type: "+a.type+" -- "+b.name+" -- "+b.message+" -- "+JSON.stringify(a).slice(0,100))
}}function updateInput(b,a){if(b==null){b=""}inputElem.value=b;handleInputChanged(a)}function blurInput(){inputElem.blur();if(ANDROID()){$B.core.application.keyboard("hide")}}function askSearch(a){$B.core.wm.postMessage("store",{type:"search",keyword:a})}function askClearResults(){$B.core.wm.postMessage("store",{type:"clearResults",keyword:inputElem.value})
}function askReset(){$B.core.wm.postMessage("store",{type:"reset",keyword:inputElem.value})}function broadcastOnInputFocus(){inputElem.setAttribute("placeholder","enter url or title of a site you love to read");$B.core.wm.postMessage("store",{type:"!searchBox::onInputFocus",keyword:inputElem.value})}function broadcastOnInputBlur(){inputElem.setAttribute("placeholder","search");
$B.core.wm.postMessage("store",{type:"!searchBox::onInputBlur",keyword:inputElem.value})}function broadcastOnInputChanged(a){$B.core.wm.postMessage("store",{type:"!searchBox::onInputChanged",keyword:inputElem.value,skipAutoCompletion:a===true})}function stopPropagation(a){a.preventDefault();a.stopPropagation();return false}function handleClearInput(a){a.preventDefault();
a.stopPropagation();updateInput("");blurInput()}function handleInputFocus(){clearElem.style.display="block";searchBoxElem.className="nonEmpty";broadcastOnInputFocus()}function handleInputBlur(){var a=inputElem.value;if(a.length==0){searchBoxElem.className="empty";clearElem.style.display="none"}broadcastOnInputBlur()}function handleInputPaste(){window.setTimeout(function(){handleInputChanged(true)
},10)}function handleInputChanged(b){var c=document.activeElement==null?false:document.activeElement.getAttribute("id")=="input";var a=inputElem.value;if(a.length==0){if(c){askClearResults();clearElem.style.display="block";searchBoxElem.className="nonEmpty"}else{searchBoxElem.className="empty";clearElem.style.display="none";askReset()}}else{broadcastOnInputChanged(b);
searchBoxElem.className="nonEmpty";clearElem.style.display="block"}}function searchAndHideKeyboard(){var a=inputElem.value;if(a.length==0){askClearResults()}else{askSearch(a)}inputElem.blur()};